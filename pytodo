#!/usr/bin/env python3
import argparse

import datetime

import sqlite3


def list_tasks():
    print("All tasks")


def create_tasks():
    print("Create new task")

    new_note = input("Enter new note:")
    note_name = input("Choose title for this note:")

    con = sqlite3.connect("sqlite_new.db")

    cursor = con.cursor()

    cursor.execute(""" CREATE TABLE IF NOT EXISTS all_notes ({cn} text)""".\
                   format(cn=note_name))
    cursor.execute(""" INSERT INTO all_notes (note) VALUES ({nn}, 'test')""".\
                   format(nn=new_note))

    cursor.execute("""UPDATE all_notes SET {cn}=(note_name) WHERE {nn}=(new_note)""".\
                   format(cn=note_name, nn=new_note))

    con.commit()
    con.close()

    print("You could watch your note by 'list'")


def delete_task():
    print("Delete task")


if __name__ == "__main__":
    parser = argparse.ArgumentParser()

    parser.add_argument('command', help='Command to run. Available commands: new, list, delete')

    args = parser.parse_args()

    command = args.command

    # TODO remove if-elif
    if command == 'list':
        list_tasks()
    elif command == 'new':
        create_tasks()
    elif command == 'delete':
        delete_task()
    else:
        print('Undefined command "{}". Use pytodo --help to learn about available commands'.format(command))
